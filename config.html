<!DOCTYPE html><html lang="pt"><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1"><title>M.I.E.C. • Configuração</title>
<style>:root{--bg:#f7f9fc;--card:#fff;--border:#e3e7ef;--text:#0b1220;--muted:#6b7280}
body{margin:0;background:var(--bg);color:var(--text);font:16px/1.45 system-ui,Segoe UI,Roboto,Arial}
.wrap{max-width:960px;margin:32px auto;padding:0 16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px 16px 8px}
.row{display:grid;grid-template-columns:220px 1fr;gap:12px;align-items:center;margin:10px 0}
label{font-weight:600}input[type=text],input[type=password]{width:100%;padding:11px 12px;border:1px solid var(--border);border-radius:10px}
.btns{display:flex;flex-wrap:wrap;gap:12px;margin:8px 0}.btn{border:1px solid var(--border);padding:10px 14px;border-radius:12px;background:#eef3ff;cursor:pointer}
.muted{color:var(--muted)}.ok{color:#0a7}.bad{color:#c33}.note{margin-top:10px;font-size:14px}code{background:#eef1f6;padding:2px 6px;border-radius:6px}</style></head>
<body><div class="wrap"><h1>Configuração — Supabase <span class="muted">/ Cloud data</span></h1>
<div class="card"><div class="row"><label>Project URL</label><input id="url" type="text" placeholder="https://okmifknkaidblkueiwjn.supabase.co"></div>
<div class="row"><label>Anon Key</label><input id="key" type="password" placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rbWlma25rYWlkYmxrdWVpd2puIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU3MTI2MTYsImV4cCI6MjA3MTI4ODYxNn0.hrr7wc-SUb2iQfhS1iWrnnZj2KLql2CyPsooZGo_N5Y"></div>
<div class="row"><label>Bucket fotos</label><input id="bucket" type="text" value="photos"></div>
<div class="row"><label>Domínio permitido</label><input id="domain" type="text" placeholder=""></div>
<div class="btns"><button class="btn" id="testBtn">Testar ligação</button><button class="btn" id="saveBtn">Guardar</button><button class="btn" id="clearBtn">Limpar</button><a class="btn" href="validador.html">Voltar</a></div>
<div id="out" class="muted"></div><p class="note muted">Guarda no <code>localStorage</code> em <code>MIEC_CONFIG</code>. A app lê estes valores automaticamente.</p></div></div>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script>const STORE_KEY='MIEC_CONFIG';const $=s=>document.querySelector(s);const msg=(t,c='muted')=>{const o=$('#out');o.className=c;o.textContent=t;};
(function(){try{const b=(window.MIEC_CONFIG||{});const s=JSON.parse(localStorage.getItem(STORE_KEY)||'{}');const cfg=Object.assign({},b,s);
$('#url').value=cfg.SUPABASE_URL||'';$('#key').value=cfg.SUPABASE_ANON_KEY||'';$('#bucket').value=cfg.STORAGE_BUCKET||'photos';$('#domain').value=cfg.ALLOW_DOMAIN||'';}catch(e){}})();
$('#saveBtn').addEventListener('click',()=>{const cfg={SUPABASE_URL:$('#url').value.trim(),SUPABASE_ANON_KEY:$('#key').value.trim(),STORAGE_BUCKET:$('#bucket').value.trim()||'photos',ALLOW_DOMAIN:$('#domain').value.trim()||undefined};
localStorage.setItem(STORE_KEY,JSON.stringify(cfg));msg('Guardado. Volte ao Validador e faça login.','ok');});
$('#clearBtn').addEventListener('click',()=>{localStorage.removeItem(STORE_KEY);msg('Config limpa.','ok');});
$('#testBtn').addEventListener('click',async()=>{try{const u=$('#url').value.trim(),k=$('#key').value.trim();if(!u||!k){msg('Preencha URL e Anon Key.','bad');return;}
const c=supabase.createClient(u,k);await c.auth.getSession();msg('Ligação OK (URL + Anon válidos).','ok');}catch(e){msg('Falha: '+(e.message||e),'bad');}});</script>
</body></html>
