/*! photo-capture.r1.js */(function(){function e(t){document.readyState==='complete'?t():addEventListener('load',t,{once:true})}async function n(e,a,o,i){const r=await new Promise((t,s)=>{const n=new Image;n.onload=()=>t(n),n.onerror=s,n.src=URL.createObjectURL(e)});let{width:d,height:h}=r;const l=Math.min(a/d,o/h,1);d=Math.round(d*l),h=Math.round(h*l);const c=document.createElement('canvas');c.width=d,c.height=h;const u=c.getContext('2d');u.drawImage(r,0,0,d,h);const m=await new Promise(t=>c.toBlob(t,'image/jpeg',i||.8));return new File([m],e.name.replace(/\.(png|jpg|jpeg|heic)$/i,'')+'-min.jpg',{type:'image/jpeg'})}e(()=>{['winPhoto','motorPhoto'].forEach(e=>{const t=document.getElementById(e);t&&(t.setAttribute('accept','image/*'),t.setAttribute('capture','environment'),t.addEventListener('change',async()=>{const e=t.files&&t.files[0];if(!e)return;try{const a=await n(e,1600,1200,.75),o=new DataTransfer;o.items.add(a),t.files=o.files}catch(e){console.warn('[photo-capture]',e)}}))})})})();