/*! auto-sync.patch.v1.js */(()=>{if(window.__MIEC_AUTOSYNC_PATCH__)return;window.__MIEC_AUTOSYNC_PATCH__=true;function o(n){document.readyState==='complete'?n():addEventListener('load',n,{once:true})}o(async function(){try{let t=0;while(!(window.MIEC_SYNC&&window.MIEC_SYNC.client)&&t<40){await new Promise(r=>setTimeout(r,250));t++;}const e=window.MIEC_SYNC?.client||window.supabaseClient;if(!e)return;const{data:{session:s}}=await e.auth.getSession();if(s&&window.HistoryService?.startAutoSync)HistoryService.startAutoSync();e.auth.onAuthStateChange((_v,c)=>{if(c&&window.HistoryService?.startAutoSync)HistoryService.startAutoSync()});setInterval(()=>window.MIEC_SYNC?.pushOutbox().catch(()=>{}),120000)}catch(e){console.warn('[auto-sync]',e)}})();