// hin-iso-guard.r12b.js
(function(){function r(e){document.readyState==='complete'?e():addEventListener('load',e,{once:true})}
const L="ABCDEFGHIJKL";
function v(h){const s=(h||'').toUpperCase().replace(/[^A-Z0-9-]/g,'');const errs=[];if(s.length<14)errs.push('Muito curto');const m=s[10];if(m&&!L.includes(m))errs.push('Mês inválido (A–L)');const serial=s.slice(5,10);if(/[IOQ]/.test(serial))errs.push('Serial contém I/O/Q');const yy=s.slice(12,14);if(/^\d{2}$/.test(yy)){let y=2000+Number(yy);if(Number(yy)>=30)y-=100;if(y<1998)errs.push('<1998 carece certificado')}return{clean:s,errs}}
r(()=>{const i=document.getElementById('winInput');if(!i)return;i.addEventListener('input',()=>{const {errs}=v(i.value);const b=document.getElementById('winBadge');if(!b)return;if(errs.length){b.textContent=errs[0];b.classList.remove('hidden');b.classList.add('danger')}else{b.textContent='';b.classList.add('hidden');b.classList.remove('danger')}})})})();